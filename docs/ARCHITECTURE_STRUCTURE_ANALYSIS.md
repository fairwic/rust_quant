# ğŸ” ç›®å½•ç»“æ„æ·±åº¦åˆ†æä¸ä¼˜åŒ–å»ºè®®

> ğŸ“… **åˆ†ææ—¶é—´**: 2025-11-07  
> ğŸ“‹ **åˆ†æå¯¹è±¡**: `.cursor/rules/rustquant.mdc` ç›®å½•ç»“æ„è§„èŒƒ  
> ğŸ¯ **ç›®æ ‡**: è¯„ä¼°æ¶æ„åˆç†æ€§ï¼Œæä¾›æ”¹è¿›å»ºè®®

---

## â­ æ€»ä½“è¯„ä»·

**å½“å‰è§„èŒƒè¯„åˆ†**: â­â­â­â­â­ (4.5/5)

**æ ¸å¿ƒä¼˜ç‚¹**:
- âœ… DDDæ¶æ„æ¸…æ™°åˆç†
- âœ… åˆ†å±‚èŒè´£æ˜ç¡®
- âœ… ä¾èµ–å…³ç³»è§„èŒƒä¸¥æ ¼
- âœ… å¼€å‘æŒ‡å¯¼å®Œæ•´

**æ”¹è¿›ç©ºé—´**:
- ğŸŸ¡ éƒ¨åˆ†åŒ…èŒè´£å¯è¿›ä¸€æ­¥ç»†åŒ–
- ğŸŸ¡ ç¼ºå°‘åº”ç”¨æœåŠ¡å±‚ (Application Services)
- ğŸŸ¡ æµ‹è¯•ç›®å½•è§„èŒƒæœªå®šä¹‰
- ğŸŸ¡ é…ç½®æ–‡ä»¶ç»„ç»‡å¯ä¼˜åŒ–

---

## ğŸ“Š é€åŒ…åˆ†æä¸å»ºè®®

### ğŸ”¹ åŸºç¡€å±‚ (Foundation Layer)

#### âœ… common åŒ… - ä¼˜ç§€

**å½“å‰ç»“æ„**:
```
common/
â”œâ”€â”€ constants/  âœ… å¸¸é‡å®šä¹‰
â”œâ”€â”€ types/      âœ… å…¬å…±ç±»å‹
â”œâ”€â”€ utils/      âœ… å·¥å…·å‡½æ•°
â””â”€â”€ errors/     âœ… é”™è¯¯ç±»å‹
```

**ä¼˜ç‚¹**:
- âœ… èŒè´£æ¸…æ™°
- âœ… ç»„ç»‡åˆç†
- âœ… ç¬¦åˆ"3+åŒ…ä½¿ç”¨"åŸåˆ™

**å»ºè®®ä¼˜åŒ–** ğŸŸ¢:

```diff
common/
â”œâ”€â”€ constants/
â”‚   â”œâ”€â”€ common_enums.rs
+   â”œâ”€â”€ trading_constants.rs    # æ–°å¢: äº¤æ˜“ç›¸å…³å¸¸é‡ (æ æ†å€æ•°ã€æ‰‹ç»­è´¹ç‡ç­‰)
+   â”œâ”€â”€ market_constants.rs     # æ–°å¢: å¸‚åœºå¸¸é‡ (äº¤æ˜“å¯¹åˆ—è¡¨ã€æ—¶é—´å‘¨æœŸç­‰)
â”‚   â””â”€â”€ mod.rs
â”œâ”€â”€ types/
â”‚   â”œâ”€â”€ candle_types.rs
+   â”œâ”€â”€ market_types.rs         # æ–°å¢: å¸‚åœºç›¸å…³ç±»å‹ (Ticker, OrderBookç­‰)
â”‚   â””â”€â”€ enums/
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ time.rs
â”‚   â”œâ”€â”€ fibonacci.rs
â”‚   â”œâ”€â”€ common.rs
+   â”œâ”€â”€ math.rs                 # æ–°å¢: æ•°å­¦å·¥å…· (ç»Ÿè®¡ã€æ¦‚ç‡è®¡ç®—)
+   â”œâ”€â”€ format.rs               # æ–°å¢: æ ¼å¼åŒ–å·¥å…·
â”‚   â””â”€â”€ mod.rs
```

**ç†ç”±**: 
- äº¤æ˜“ç³»ç»Ÿéœ€è¦å¤§é‡å¸¸é‡é…ç½®
- æ•°å­¦è®¡ç®—å·¥å…·å¾ˆå¸¸ç”¨
- æ ¼å¼åŒ–è¾“å‡ºéœ€æ±‚é¢‘ç¹

---

#### âœ… core åŒ… - è‰¯å¥½

**å½“å‰ç»“æ„**:
```
core/
â”œâ”€â”€ config/     âœ… é…ç½®ç®¡ç†
â”œâ”€â”€ database/   âœ… æ•°æ®åº“è¿æ¥æ± 
â”œâ”€â”€ cache/      âœ… ç¼“å­˜å®¢æˆ·ç«¯
â”œâ”€â”€ logger/     âœ… æ—¥å¿—ç³»ç»Ÿ
â””â”€â”€ error/      âœ… æ ¸å¿ƒé”™è¯¯
```

**ä¼˜ç‚¹**:
- âœ… åŸºç¡€è®¾æ–½é›†ä¸­
- âœ… å•ä¾‹æ¨¡å¼æ¸…æ™°

**å»ºè®®ä¼˜åŒ–** ğŸŸ¡:

```diff
core/
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ env.rs
â”‚   â”œâ”€â”€ db.rs
â”‚   â”œâ”€â”€ redis_config.rs
â”‚   â”œâ”€â”€ email.rs
+   â”œâ”€â”€ exchange_config.rs      # æ–°å¢: äº¤æ˜“æ‰€é…ç½® (APIå¯†é’¥ç®¡ç†)
+   â”œâ”€â”€ strategy_config.rs      # æ–°å¢: ç­–ç•¥å…¨å±€é…ç½®
â”‚   â”œâ”€â”€ shutdown_manager.rs
â”‚   â””â”€â”€ mod.rs
â”œâ”€â”€ database/
â”‚   â”œâ”€â”€ sqlx_pool.rs
+   â”œâ”€â”€ migration.rs            # æ–°å¢: æ•°æ®åº“è¿ç§»ç®¡ç†
+   â”œâ”€â”€ health_check.rs         # æ–°å¢: è¿æ¥å¥åº·æ£€æŸ¥
â”‚   â””â”€â”€ mod.rs
â”œâ”€â”€ cache/
â”‚   â”œâ”€â”€ redis_client.rs
+   â”œâ”€â”€ cache_policy.rs         # æ–°å¢: ç¼“å­˜ç­–ç•¥ (è¿‡æœŸæ—¶é—´ã€æ·˜æ±°ç­–ç•¥)
+   â”œâ”€â”€ distributed_lock.rs     # æ–°å¢: åˆ†å¸ƒå¼é”
â”‚   â””â”€â”€ mod.rs
â”œâ”€â”€ logger/
â”‚   â”œâ”€â”€ setup.rs
+   â”œâ”€â”€ metrics.rs              # æ–°å¢: æŒ‡æ ‡æ”¶é›† (æ€§èƒ½ç›‘æ§)
â”‚   â””â”€â”€ mod.rs
+ â”œâ”€â”€ telemetry/                # æ–°å¢: é¥æµ‹å’Œç›‘æ§
+â”‚   â”œâ”€â”€ tracing.rs             # é“¾è·¯è¿½è¸ª
+â”‚   â”œâ”€â”€ metrics.rs             # æŒ‡æ ‡æ”¶é›†
+â”‚   â””â”€â”€ mod.rs
â””â”€â”€ error/
    â”œâ”€â”€ mod.rs
+   â”œâ”€â”€ error_handler.rs        # æ–°å¢: ç»Ÿä¸€é”™è¯¯å¤„ç†å™¨
```

**ç†ç”±**:
- äº¤æ˜“ç³»ç»Ÿéœ€è¦APIå¯†é’¥ç®¡ç†
- æ•°æ®åº“è¿ç§»æ˜¯å¿…éœ€åŠŸèƒ½
- åˆ†å¸ƒå¼é”åœ¨å¹¶å‘åœºæ™¯å¾ˆé‡è¦
- æ€§èƒ½ç›‘æ§å¯¹é‡åŒ–ç³»ç»Ÿè‡³å…³é‡è¦

---

### ğŸ”¸ é¢†åŸŸå±‚ (Domain Layer) â­

#### â­ domain åŒ… - ä¼˜ç§€

**å½“å‰ç»“æ„**:
```
domain/
â”œâ”€â”€ entities/       âœ… èšåˆæ ¹
â”œâ”€â”€ value_objects/  âœ… å€¼å¯¹è±¡
â”œâ”€â”€ enums/          âœ… ä¸šåŠ¡æšä¸¾
â””â”€â”€ traits/         âœ… é¢†åŸŸæ¥å£
```

**ä¼˜ç‚¹**:
- âœ… DDDæ ¸å¿ƒæ¦‚å¿µå®Œæ•´
- âœ… é›¶å¤–éƒ¨ä¾èµ–
- âœ… èŒè´£æå…¶æ¸…æ™°

**å»ºè®®ä¼˜åŒ–** ğŸŸ¢:

```diff
domain/
â”œâ”€â”€ entities/
â”‚   â”œâ”€â”€ candle.rs
â”‚   â”œâ”€â”€ order.rs
â”‚   â”œâ”€â”€ strategy_config.rs
+   â”œâ”€â”€ position.rs             # æ–°å¢: æŒä»“å®ä½“ (é‡è¦!)
+   â”œâ”€â”€ account.rs              # æ–°å¢: è´¦æˆ·å®ä½“
+   â”œâ”€â”€ trade.rs                # æ–°å¢: æˆäº¤è®°å½•å®ä½“
â”‚   â””â”€â”€ mod.rs
â”œâ”€â”€ value_objects/
â”‚   â”œâ”€â”€ price.rs
â”‚   â”œâ”€â”€ volume.rs
â”‚   â”œâ”€â”€ signal.rs
+   â”œâ”€â”€ symbol.rs               # æ–°å¢: äº¤æ˜“å¯¹å€¼å¯¹è±¡ (å¸¦éªŒè¯)
+   â”œâ”€â”€ timeframe.rs            # æ–°å¢: æ—¶é—´å‘¨æœŸå€¼å¯¹è±¡ (ä»æšä¸¾æå‡)
+   â”œâ”€â”€ leverage.rs             # æ–°å¢: æ æ†å€æ•°å€¼å¯¹è±¡ (å¸¦éªŒè¯)
+   â”œâ”€â”€ percentage.rs           # æ–°å¢: ç™¾åˆ†æ¯”å€¼å¯¹è±¡ (0-100)
â”‚   â””â”€â”€ mod.rs
â”œâ”€â”€ enums/
â”‚   â”œâ”€â”€ order_enums.rs
â”‚   â”œâ”€â”€ strategy_enums.rs
+   â”œâ”€â”€ market_enums.rs         # æ–°å¢: å¸‚åœºç›¸å…³æšä¸¾
â”‚   â””â”€â”€ mod.rs
â”œâ”€â”€ traits/
â”‚   â”œâ”€â”€ strategy_trait.rs
â”‚   â”œâ”€â”€ repository_trait.rs
+   â”œâ”€â”€ risk_manager_trait.rs  # æ–°å¢: é£é™©ç®¡ç†æ¥å£
+   â”œâ”€â”€ execution_trait.rs     # æ–°å¢: æ‰§è¡Œæ¥å£
â”‚   â””â”€â”€ mod.rs
+ â”œâ”€â”€ services/                 # æ–°å¢: é¢†åŸŸæœåŠ¡
+â”‚   â”œâ”€â”€ position_calculator.rs # æŒä»“è®¡ç®—æœåŠ¡
+â”‚   â”œâ”€â”€ risk_calculator.rs     # é£é™©è®¡ç®—æœåŠ¡
+â”‚   â””â”€â”€ mod.rs
+ â”œâ”€â”€ events/                   # æ–°å¢: é¢†åŸŸäº‹ä»¶
+â”‚   â”œâ”€â”€ order_events.rs        # è®¢å•äº‹ä»¶
+â”‚   â”œâ”€â”€ position_events.rs     # æŒä»“äº‹ä»¶
+â”‚   â””â”€â”€ mod.rs
â””â”€â”€ lib.rs
```

**ç†ç”±**:
1. **Positionå®ä½“ç¼ºå¤±**: æŒä»“æ˜¯é‡åŒ–ç³»ç»Ÿæ ¸å¿ƒæ¦‚å¿µï¼Œåº”è¯¥æœ‰ç‹¬ç«‹çš„èšåˆæ ¹
2. **å€¼å¯¹è±¡æ‰©å±•**: Symbol, Leverageç­‰åº”è¯¥æ˜¯å€¼å¯¹è±¡è€Œéç®€å•å­—ç¬¦ä¸²
3. **é¢†åŸŸæœåŠ¡**: å¤æ‚çš„ä¸šåŠ¡è®¡ç®—åº”è¯¥æ”¾åœ¨é¢†åŸŸæœåŠ¡ä¸­
4. **é¢†åŸŸäº‹ä»¶**: DDDä¸­äº‹ä»¶é©±åŠ¨æ˜¯é‡è¦æ¨¡å¼

**è¯„åˆ†**: â­â­â­â­ â†’ â­â­â­â­â­ (æ”¹è¿›å)

---

### ğŸ”¸ åŸºç¡€è®¾æ–½å±‚ (Infrastructure Layer)

#### âœ… infrastructure åŒ… - è‰¯å¥½

**å½“å‰ç»“æ„**:
```
infrastructure/
â”œâ”€â”€ repositories/   âœ… æ•°æ®è®¿é—®
â”œâ”€â”€ cache/          âœ… ç¼“å­˜
â””â”€â”€ messaging/      âœ… æ¶ˆæ¯ä¼ é€’
```

**ä¼˜ç‚¹**:
- âœ… å®ç°domainæ¥å£
- âœ… ç»Ÿä¸€ç®¡ç†åŸºç¡€è®¾æ–½

**å»ºè®®ä¼˜åŒ–** ğŸŸ¡:

```diff
infrastructure/
â”œâ”€â”€ repositories/
â”‚   â”œâ”€â”€ candle_repository.rs
â”‚   â”œâ”€â”€ strategy_config_repository.rs
+   â”œâ”€â”€ order_repository.rs     # æ–°å¢: è®¢å•ä»“å‚¨
+   â”œâ”€â”€ position_repository.rs  # æ–°å¢: æŒä»“ä»“å‚¨
+   â”œâ”€â”€ account_repository.rs   # æ–°å¢: è´¦æˆ·ä»“å‚¨
+   â”œâ”€â”€ trade_repository.rs     # æ–°å¢: æˆäº¤è®°å½•ä»“å‚¨
â”‚   â””â”€â”€ mod.rs
â”œâ”€â”€ cache/
â”‚   â”œâ”€â”€ indicator_cache.rs
â”‚   â”œâ”€â”€ strategy_cache.rs
+   â”œâ”€â”€ market_data_cache.rs    # æ–°å¢: å¸‚åœºæ•°æ®ç¼“å­˜
+   â”œâ”€â”€ cache_key_builder.rs    # æ–°å¢: ç¼“å­˜keyç”Ÿæˆå™¨
â”‚   â””â”€â”€ mod.rs
â”œâ”€â”€ messaging/
+   â”œâ”€â”€ redis_pubsub.rs         # æ–°å¢: Rediså‘å¸ƒè®¢é˜…
+   â”œâ”€â”€ event_publisher.rs      # æ–°å¢: äº‹ä»¶å‘å¸ƒå™¨
â”‚   â””â”€â”€ mod.rs
+ â”œâ”€â”€ external/                 # æ–°å¢: å¤–éƒ¨æœåŠ¡é€‚é…
+â”‚   â”œâ”€â”€ okx_adapter.rs         # OKXäº¤æ˜“æ‰€é€‚é…å™¨
+â”‚   â”œâ”€â”€ binance_adapter.rs     # Binanceé€‚é…å™¨
+â”‚   â”œâ”€â”€ email_service.rs       # é‚®ä»¶æœåŠ¡
+â”‚   â””â”€â”€ mod.rs
+ â”œâ”€â”€ persistence/              # æ–°å¢: æŒä¹…åŒ–ç­–ç•¥
+â”‚   â”œâ”€â”€ batch_writer.rs        # æ‰¹é‡å†™å…¥
+â”‚   â”œâ”€â”€ transaction_manager.rs # äº‹åŠ¡ç®¡ç†
+â”‚   â””â”€â”€ mod.rs
â””â”€â”€ lib.rs
```

**ç†ç”±**:
1. **ç¼ºå°‘é‡è¦Repository**: Order, Position, Accountæ˜¯æ ¸å¿ƒå®ä½“
2. **å¤–éƒ¨æœåŠ¡é€‚é…**: äº¤æ˜“æ‰€APIåº”è¯¥æœ‰ç»Ÿä¸€çš„é€‚é…å±‚
3. **æŒä¹…åŒ–ç­–ç•¥**: æ‰¹é‡å†™å…¥ã€äº‹åŠ¡ç®¡ç†æ˜¯æ€§èƒ½å…³é”®
4. **æ¶ˆæ¯ä¼ é€’**: äº‹ä»¶é©±åŠ¨éœ€è¦å®Œæ•´çš„æ¶ˆæ¯ç³»ç»Ÿ

**è¯„åˆ†**: â­â­â­â­ â†’ â­â­â­â­â­ (æ”¹è¿›å)

---

### ğŸ”¹ æ•°æ®/è®¡ç®—å±‚

#### âœ… market åŒ… - ä¼˜ç§€

**å½“å‰ç»“æ„**: åˆç†

**å»ºè®®ä¼˜åŒ–** ğŸŸ¢:

```diff
market/
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ candle_entity.rs
â”‚   â”œâ”€â”€ candle_dto.rs
â”‚   â”œâ”€â”€ tickers.rs
+   â”œâ”€â”€ order_book.rs           # æ–°å¢: è®¢å•ç°¿æ¨¡å‹
+   â”œâ”€â”€ trade.rs                # æ–°å¢: æˆäº¤æ•°æ®æ¨¡å‹
â”‚   â””â”€â”€ mod.rs
â”œâ”€â”€ repositories/
â”‚   â”œâ”€â”€ candle_service.rs
+   â”œâ”€â”€ ticker_service.rs       # æ–°å¢: TickeræœåŠ¡
+   â”œâ”€â”€ order_book_service.rs   # æ–°å¢: è®¢å•ç°¿æœåŠ¡
â”‚   â””â”€â”€ mod.rs
â”œâ”€â”€ streams/
â”‚   â”œâ”€â”€ websocket_service.rs
+   â”œâ”€â”€ reconnect_handler.rs    # æ–°å¢: é‡è¿å¤„ç†
+   â”œâ”€â”€ heartbeat_manager.rs    # æ–°å¢: å¿ƒè·³ç®¡ç†
â”‚   â””â”€â”€ mod.rs
â”œâ”€â”€ exchanges/
+   â”œâ”€â”€ exchange_trait.rs       # æ–°å¢: äº¤æ˜“æ‰€æ¥å£å®šä¹‰
+   â”œâ”€â”€ okx/                    # æ–°å¢: OKXç‰¹å®šå®ç°
+   â”œâ”€â”€ binance/                # æ–°å¢: Binanceç‰¹å®šå®ç°
â”‚   â””â”€â”€ mod.rs
+ â”œâ”€â”€ aggregators/              # æ–°å¢: æ•°æ®èšåˆ
+â”‚   â”œâ”€â”€ multi_exchange.rs     # å¤šäº¤æ˜“æ‰€æ•°æ®èšåˆ
+â”‚   â””â”€â”€ mod.rs
```

**ç†ç”±**:
- OrderBookå’ŒTradeæ˜¯å¸‚åœºæ•°æ®çš„é‡è¦ç»„æˆ
- WebSocketéœ€è¦å¥å£®çš„é‡è¿å’Œå¿ƒè·³æœºåˆ¶
- å¤šäº¤æ˜“æ‰€æ”¯æŒéœ€è¦ç»Ÿä¸€æ¥å£

---

#### â­ indicators åŒ… - ä¼˜ç§€

**å½“å‰ç»“æ„**: éå¸¸å¥½

**å»ºè®®ä¼˜åŒ–** ğŸŸ¢:

```diff
indicators/
â”œâ”€â”€ trend/
â”‚   â”œâ”€â”€ ema.rs
â”‚   â”œâ”€â”€ sma.rs
â”‚   â”œâ”€â”€ vegas/
â”‚   â”œâ”€â”€ nwe_indicator.rs
â”‚   â”œâ”€â”€ signal_weight.rs
+   â”œâ”€â”€ supertrend.rs           # æ–°å¢: SuperTrendæŒ‡æ ‡
+   â”œâ”€â”€ ichimoku.rs             # æ–°å¢: ä¸€ç›®å‡è¡¡è¡¨
â”‚   â””â”€â”€ mod.rs
â”œâ”€â”€ momentum/
â”‚   â”œâ”€â”€ rsi.rs
â”‚   â”œâ”€â”€ macd.rs
â”‚   â”œâ”€â”€ kdj.rs
+   â”œâ”€â”€ cci.rs                  # æ–°å¢: CCIæŒ‡æ ‡
+   â”œâ”€â”€ stochastic.rs           # æ–°å¢: éšæœºæŒ‡æ ‡
â”‚   â””â”€â”€ mod.rs
â”œâ”€â”€ volatility/
â”‚   â”œâ”€â”€ atr.rs
â”‚   â”œâ”€â”€ bollinger.rs
+   â”œâ”€â”€ keltner.rs              # æ–°å¢: è‚¯ç‰¹çº³é€šé“
+   â”œâ”€â”€ donchian.rs             # æ–°å¢: å”å¥‡å®‰é€šé“
â”‚   â””â”€â”€ mod.rs
â”œâ”€â”€ volume/
+   â”œâ”€â”€ obv.rs                  # æ–°å¢: OBVèƒ½é‡æ½®
+   â”œâ”€â”€ volume_profile.rs       # æ–°å¢: æˆäº¤é‡åˆ†å¸ƒ
+   â”œâ”€â”€ vwap.rs                 # æ–°å¢: VWAP
â”‚   â””â”€â”€ mod.rs
â”œâ”€â”€ pattern/
â”‚   â”œâ”€â”€ engulfing.rs
â”‚   â”œâ”€â”€ hammer.rs
+   â”œâ”€â”€ candlestick_patterns.rs # æ–°å¢: å®Œæ•´Kçº¿å½¢æ€åº“
+   â”œâ”€â”€ chart_patterns.rs       # æ–°å¢: å›¾è¡¨å½¢æ€ (å¤´è‚©é¡¶ç­‰)
â”‚   â””â”€â”€ mod.rs
+ â”œâ”€â”€ composite/                # æ–°å¢: å¤åˆæŒ‡æ ‡
+â”‚   â”œâ”€â”€ squeeze_momentum.rs   # SqueezeåŠ¨é‡
+â”‚   â”œâ”€â”€ market_structure.rs   # å¸‚åœºç»“æ„åˆ†æ
+â”‚   â””â”€â”€ mod.rs
+ â”œâ”€â”€ ml/                       # æ–°å¢: æœºå™¨å­¦ä¹ æŒ‡æ ‡
+â”‚   â”œâ”€â”€ prediction.rs          # é¢„æµ‹æŒ‡æ ‡
+â”‚   â”œâ”€â”€ anomaly_detection.rs  # å¼‚å¸¸æ£€æµ‹
+â”‚   â””â”€â”€ mod.rs
```

**ç†ç”±**:
- é‡åŒ–ç³»ç»Ÿéœ€è¦ä¸°å¯Œçš„æŠ€æœ¯æŒ‡æ ‡åº“
- composite/ç”¨äºå¤æ‚çš„ç»„åˆæŒ‡æ ‡
- ml/ä¸ºAIé©±åŠ¨ç­–ç•¥é¢„ç•™ç©ºé—´

---

### ğŸ”¹ ä¸šåŠ¡å±‚ (Business Logic Layer)

#### âš ï¸ **é‡å¤§å»ºè®®**: ç¼ºå°‘ `services` åŒ…

**é—®é¢˜**: å½“å‰æ¶æ„ç¼ºå°‘åº”ç”¨æœåŠ¡å±‚ (Application Services)

**å½±å“**:
- ğŸ”´ ä¸šåŠ¡é€»è¾‘å¯èƒ½æ•£è½åœ¨orchestrationå’Œstrategiesä¸­
- ğŸ”´ ç¼ºå°‘ç»Ÿä¸€çš„ä¸šåŠ¡åè°ƒå±‚
- ğŸ”´ éš¾ä»¥å®ç°å¤æ‚çš„ä¸šåŠ¡æµç¨‹

**å»ºè®®æ–°å¢** â­â­â­â­â­:

```
crates/services/               # æ–°å¢: åº”ç”¨æœåŠ¡å±‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ strategy/              # ç­–ç•¥ç›¸å…³æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ strategy_config_service.rs    # ç­–ç•¥é…ç½®ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ strategy_execution_service.rs # ç­–ç•¥æ‰§è¡Œåè°ƒ
â”‚   â”‚   â”œâ”€â”€ backtest_service.rs           # å›æµ‹æœåŠ¡
â”‚   â”‚   â””â”€â”€ mod.rs
â”‚   â”œâ”€â”€ trading/               # äº¤æ˜“ç›¸å…³æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ order_service.rs              # è®¢å•æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ position_service.rs           # æŒä»“æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ trade_service.rs              # æˆäº¤æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ account_service.rs            # è´¦æˆ·æœåŠ¡
â”‚   â”‚   â””â”€â”€ mod.rs
â”‚   â”œâ”€â”€ market/                # å¸‚åœºæ•°æ®æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ candle_service.rs             # Kçº¿æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ ticker_service.rs             # TickeræœåŠ¡
â”‚   â”‚   â”œâ”€â”€ market_depth_service.rs       # å¸‚åœºæ·±åº¦æœåŠ¡
â”‚   â”‚   â””â”€â”€ mod.rs
â”‚   â”œâ”€â”€ risk/                  # é£é™©æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ risk_check_service.rs         # é£é™©æ£€æŸ¥
â”‚   â”‚   â”œâ”€â”€ position_risk_service.rs      # æŒä»“é£é™©
â”‚   â”‚   â””â”€â”€ mod.rs
â”‚   â””â”€â”€ lib.rs
â””â”€â”€ Cargo.toml

ä¾èµ–å…³ç³»:
services â†’ domain (ä½¿ç”¨é¢†åŸŸæ¨¡å‹)
services â†’ infrastructure (æ•°æ®è®¿é—®)
services â†’ strategies (ç­–ç•¥å¼•æ“)
services â†’ risk (é£é™©å¼•æ“)
orchestration â†’ services (è€Œéç›´æ¥è°ƒç”¨åº•å±‚)
```

**ä¸ºä»€ä¹ˆé‡è¦** â­â­â­â­â­:
1. **èŒè´£åˆ†ç¦»**: orchestrationåªåšè°ƒåº¦ï¼Œserviceså®ç°ä¸šåŠ¡åè°ƒ
2. **å¤ç”¨æ€§**: å¤šä¸ªåœ°æ–¹éœ€è¦çš„ä¸šåŠ¡é€»è¾‘ç»Ÿä¸€åœ¨services
3. **æµ‹è¯•æ€§**: serviceså±‚æ˜“äºå•å…ƒæµ‹è¯•
4. **DDDæ ‡å‡†**: åº”ç”¨æœåŠ¡å±‚æ˜¯DDDçš„é‡è¦ç»„æˆ

**ä¼˜å…ˆçº§**: ğŸ”´ **é«˜** (å¼ºçƒˆå»ºè®®æ·»åŠ )

---

#### ğŸŸ¡ strategies åŒ… - è‰¯å¥½

**å½“å‰ç»“æ„**:
```
strategies/
â”œâ”€â”€ framework/        âœ… ç­–ç•¥æ¡†æ¶
â”œâ”€â”€ implementations/  âœ… å…·ä½“ç­–ç•¥
â””â”€â”€ backtesting/      âœ… å›æµ‹å¼•æ“
```

**ä¼˜ç‚¹**:
- âœ… æ¡†æ¶å’Œå®ç°åˆ†ç¦»
- âœ… èŒè´£æ¸…æ™°

**å»ºè®®ä¼˜åŒ–** ğŸŸ¡:

```diff
strategies/
â”œâ”€â”€ framework/
â”‚   â”œâ”€â”€ strategy_trait.rs
â”‚   â”œâ”€â”€ strategy_manager.rs
â”‚   â”œâ”€â”€ strategy_registry.rs
â”‚   â”œâ”€â”€ strategy_common.rs
+   â”œâ”€â”€ signal_combiner.rs      # æ–°å¢: ä¿¡å·åˆå¹¶å™¨
+   â”œâ”€â”€ strategy_optimizer.rs   # æ–°å¢: ç­–ç•¥ä¼˜åŒ–å™¨
â”‚   â”œâ”€â”€ config/
â”‚   â””â”€â”€ mod.rs
â”œâ”€â”€ implementations/
â”‚   â”œâ”€â”€ vegas_executor.rs
â”‚   â”œâ”€â”€ nwe_executor.rs
â”‚   â”œâ”€â”€ nwe_strategy/
â”‚   â”œâ”€â”€ macd_kdj_strategy.rs
+   â”œâ”€â”€ grid_strategy.rs        # æ–°å¢: ç½‘æ ¼ç­–ç•¥
+   â”œâ”€â”€ arbitrage_strategy.rs   # æ–°å¢: å¥—åˆ©ç­–ç•¥
+   â”œâ”€â”€ market_making_strategy.rs # æ–°å¢: åšå¸‚ç­–ç•¥
â”‚   â””â”€â”€ mod.rs
â”œâ”€â”€ backtesting/
â”‚   â”œâ”€â”€ mod.rs
+   â”œâ”€â”€ backtest_engine.rs      # æ–°å¢: å›æµ‹å¼•æ“å®ç°
+   â”œâ”€â”€ backtest_report.rs      # æ–°å¢: å›æµ‹æŠ¥å‘Š
+   â”œâ”€â”€ performance_metrics.rs  # æ–°å¢: æ€§èƒ½æŒ‡æ ‡
+   â”œâ”€â”€ optimization/           # æ–°å¢: å‚æ•°ä¼˜åŒ–
+â”‚   â”‚   â”œâ”€â”€ genetic_algorithm.rs
+â”‚   â”‚   â”œâ”€â”€ grid_search.rs
+â”‚   â”‚   â””â”€â”€ mod.rs
â”‚   â””â”€â”€ mod.rs
+ â”œâ”€â”€ portfolio/                # æ–°å¢: ç»„åˆç­–ç•¥
+â”‚   â”œâ”€â”€ portfolio_manager.rs  # ç»„åˆç®¡ç†
+â”‚   â”œâ”€â”€ allocation.rs          # èµ„é‡‘åˆ†é…
+â”‚   â””â”€â”€ mod.rs
```

**ç†ç”±**:
- backtestingç›®å½•è¿‡äºç©ºæ´ï¼Œéœ€è¦è¡¥å……
- ç¼ºå°‘å¸¸è§çš„ç­–ç•¥ç±»å‹ (ç½‘æ ¼ã€å¥—åˆ©ã€åšå¸‚)
- å‚æ•°ä¼˜åŒ–æ˜¯é‡åŒ–ç³»ç»Ÿå¿…éœ€åŠŸèƒ½
- ç»„åˆç­–ç•¥ç®¡ç†å¾ˆé‡è¦

---

#### ğŸŸ¡ risk åŒ… - è‰¯å¥½

**å½“å‰ç»“æ„**:
```
risk/
â”œâ”€â”€ order/      âœ… è®¢å•ç®¡ç†
â”œâ”€â”€ position/   âœ… æŒä»“ç®¡ç†
â”œâ”€â”€ account/    âœ… è´¦æˆ·ç®¡ç†
â”œâ”€â”€ policies/   âœ… é£æ§ç­–ç•¥
â””â”€â”€ backtest/   âœ… å›æµ‹æ¨¡å‹
```

**å»ºè®®ä¼˜åŒ–** ğŸŸ¡:

```diff
risk/
â”œâ”€â”€ order/
â”‚   â”œâ”€â”€ swap_order_sqlx.rs
â”‚   â”œâ”€â”€ swap_orders_detail_sqlx.rs
â”‚   â””â”€â”€ mod.rs
â”œâ”€â”€ position/
â”‚   â”œâ”€â”€ position_service.rs
â”‚   â”œâ”€â”€ position_analysis.rs
+   â”œâ”€â”€ position_calculator.rs  # æ–°å¢: æŒä»“è®¡ç®—
+   â”œâ”€â”€ pnl_calculator.rs       # æ–°å¢: ç›ˆäºè®¡ç®—
â”‚   â””â”€â”€ mod.rs
â”œâ”€â”€ account/
â”‚   â”œâ”€â”€ account_job.rs
+   â”œâ”€â”€ account_balance.rs      # æ–°å¢: è´¦æˆ·ä½™é¢ç®¡ç†
+   â”œâ”€â”€ margin_calculator.rs    # æ–°å¢: ä¿è¯é‡‘è®¡ç®—
â”‚   â””â”€â”€ mod.rs
â”œâ”€â”€ policies/
+   â”œâ”€â”€ position_limit_policy.rs # æ–°å¢: æŒä»“é™é¢ç­–ç•¥
+   â”œâ”€â”€ drawdown_policy.rs       # æ–°å¢: å›æ’¤æ§åˆ¶ç­–ç•¥
+   â”œâ”€â”€ exposure_policy.rs       # æ–°å¢: é£é™©æ•å£ç­–ç•¥
+   â”œâ”€â”€ kelly_criterion.rs       # æ–°å¢: å‡¯åˆ©å…¬å¼
â”‚   â””â”€â”€ mod.rs
â”œâ”€â”€ backtest/
â”‚   â”œâ”€â”€ back_test_analysis.rs
â”‚   â”œâ”€â”€ back_test_log.rs
+   â”œâ”€â”€ back_test_metrics.rs    # æ–°å¢: å›æµ‹æŒ‡æ ‡è®¡ç®—
â”‚   â””â”€â”€ mod.rs
+ â”œâ”€â”€ monitoring/               # æ–°å¢: é£é™©ç›‘æ§
+â”‚   â”œâ”€â”€ real_time_monitor.rs  # å®æ—¶ç›‘æ§
+â”‚   â”œâ”€â”€ alert_manager.rs       # å‘Šè­¦ç®¡ç†
+â”‚   â””â”€â”€ mod.rs
```

**ç†ç”±**:
- policies/è¿‡äºç©ºæ´ï¼Œéœ€è¦å…·ä½“é£æ§ç­–ç•¥
- ç¼ºå°‘PnLå’Œä¿è¯é‡‘è®¡ç®—
- é£é™©ç›‘æ§æ˜¯å®ç›˜å¿…éœ€

---

#### âœ… execution åŒ… - è‰¯å¥½

**å½“å‰ç»“æ„**: åˆç†

**å»ºè®®ä¼˜åŒ–** ğŸŸ¢:

```diff
execution/
â”œâ”€â”€ execution_engine/
â”‚   â”œâ”€â”€ backtest_executor.rs
â”‚   â”œâ”€â”€ risk_order_job.rs
+   â”œâ”€â”€ live_executor.rs        # æ–°å¢: å®ç›˜æ‰§è¡Œå™¨
+   â”œâ”€â”€ paper_executor.rs       # æ–°å¢: æ¨¡æ‹Ÿç›˜æ‰§è¡Œå™¨
â”‚   â””â”€â”€ mod.rs
â”œâ”€â”€ order_manager/
â”‚   â”œâ”€â”€ order_service.rs
â”‚   â”œâ”€â”€ swap_order_service.rs
+   â”œâ”€â”€ order_router.rs         # æ–°å¢: è®¢å•è·¯ç”± (æ™ºèƒ½è·¯ç”±åˆ°æœ€ä¼˜äº¤æ˜“æ‰€)
+   â”œâ”€â”€ order_validator.rs      # æ–°å¢: è®¢å•éªŒè¯
+   â”œâ”€â”€ order_tracker.rs        # æ–°å¢: è®¢å•è·Ÿè¸ª
â”‚   â””â”€â”€ mod.rs
â”œâ”€â”€ position_manager/
+   â”œâ”€â”€ position_tracker.rs     # æ–°å¢: æŒä»“è·Ÿè¸ª
+   â”œâ”€â”€ position_closer.rs      # æ–°å¢: å¹³ä»“ç®¡ç†
â”‚   â””â”€â”€ mod.rs
+ â”œâ”€â”€ fill_processor/           # æ–°å¢: æˆäº¤å¤„ç†
+â”‚   â”œâ”€â”€ fill_handler.rs        # æˆäº¤å¤„ç†å™¨
+â”‚   â”œâ”€â”€ slippage_calculator.rs # æ»‘ç‚¹è®¡ç®—
+â”‚   â””â”€â”€ mod.rs
+ â”œâ”€â”€ retry/                    # æ–°å¢: é‡è¯•æœºåˆ¶
+â”‚   â”œâ”€â”€ retry_policy.rs        # é‡è¯•ç­–ç•¥
+â”‚   â”œâ”€â”€ exponential_backoff.rs
+â”‚   â””â”€â”€ mod.rs
```

**ç†ç”±**:
- è®¢å•è·¯ç”±ã€éªŒè¯ã€è·Ÿè¸ªæ˜¯æ‰§è¡Œå±‚æ ¸å¿ƒåŠŸèƒ½
- æˆäº¤å¤„ç†å’Œæ»‘ç‚¹è®¡ç®—å¾ˆé‡è¦
- é‡è¯•æœºåˆ¶æ˜¯ç¨³å®šæ€§ä¿éšœ

---

### ğŸ”¸ ç¼–æ’å±‚

#### ğŸŸ¡ orchestration åŒ… - éœ€è¦é‡æ„

**å½“å‰ç»“æ„**:
```
orchestration/
â”œâ”€â”€ scheduler/        âœ… ä»»åŠ¡è°ƒåº¦
â”œâ”€â”€ workflow/         âœ… å·¥ä½œæµ
â”œâ”€â”€ event_bus/        âœ… äº‹ä»¶æ€»çº¿
â””â”€â”€ strategy_runner/  âœ… ç­–ç•¥è¿è¡Œå™¨
```

**é—®é¢˜åˆ†æ**:
- ğŸŸ¡ workflow/strategy_config.rs åŒ…å«ä¸šåŠ¡é€»è¾‘ (åº”è¯¥ç§»åˆ°services)
- ğŸŸ¡ strategy_runnerå¯èƒ½é‡å¤ (å·²ç»åœ¨workflowä¸­)

**å»ºè®®ä¼˜åŒ–** ğŸŸ¡:

```diff
orchestration/
â”œâ”€â”€ scheduler/
â”‚   â”œâ”€â”€ job_scheduler.rs
â”‚   â”œâ”€â”€ task_scheduler.rs
â”‚   â”œâ”€â”€ scheduler_service.rs
+   â”œâ”€â”€ cron_manager.rs         # æ–°å¢: Cronè¡¨è¾¾å¼ç®¡ç†
â”‚   â””â”€â”€ mod.rs
â”œâ”€â”€ workflow/
â”‚   â”œâ”€â”€ candles_job.rs
-   â”œâ”€â”€ strategy_config.rs      # ç§»é™¤: ç§»åˆ°servicesåŒ…
â”‚   â”œâ”€â”€ strategy_runner.rs
â”‚   â”œâ”€â”€ account_job.rs
+   â”œâ”€â”€ workflow_builder.rs     # æ–°å¢: å·¥ä½œæµæ„å»ºå™¨
+   â”œâ”€â”€ workflow_executor.rs    # æ–°å¢: å·¥ä½œæµæ‰§è¡Œå™¨
â”‚   â””â”€â”€ mod.rs
â”œâ”€â”€ event_bus/
+   â”œâ”€â”€ event_dispatcher.rs     # æ–°å¢: äº‹ä»¶åˆ†å‘å™¨
+   â”œâ”€â”€ event_handler_registry.rs # æ–°å¢: å¤„ç†å™¨æ³¨å†Œè¡¨
â”‚   â””â”€â”€ mod.rs
- â”œâ”€â”€ strategy_runner/          # ç§»é™¤: åˆå¹¶åˆ°workflow
+ â”œâ”€â”€ coordination/             # æ–°å¢: åè°ƒå±‚
+â”‚   â”œâ”€â”€ saga_coordinator.rs   # Sagaåè°ƒå™¨ (åˆ†å¸ƒå¼äº‹åŠ¡)
+â”‚   â””â”€â”€ mod.rs
```

**ç†ç”±**:
- ä¸šåŠ¡é€»è¾‘åº”è¯¥ç§»åˆ°servicesåŒ…
- éœ€è¦æ›´å®Œå–„çš„å·¥ä½œæµèƒ½åŠ›
- Sagaæ¨¡å¼å¤„ç†åˆ†å¸ƒå¼äº‹åŠ¡

---

## ğŸ†• å»ºè®®æ–°å¢çš„åŒ…

### 1. services åŒ… â­â­â­â­â­ (å¼ºçƒˆå»ºè®®)

**èŒè´£**: åº”ç”¨æœåŠ¡å±‚ï¼Œåè°ƒé¢†åŸŸå¯¹è±¡å’ŒåŸºç¡€è®¾æ–½

**ä½ç½®**: `crates/services/`

**é‡è¦æ€§**: ğŸ”´ **æé«˜** - DDDæ¶æ„çš„é‡è¦ç»„æˆ

**ç†ç”±**:
- å½“å‰orchestrationåŒ…å«äº†å¤ªå¤šä¸šåŠ¡åè°ƒé€»è¾‘
- éœ€è¦ä¸€ä¸ªä¸“é—¨çš„å±‚æ¥åè°ƒdomainå’Œinfrastructure
- ç¬¦åˆDDDçš„æ ‡å‡†å®è·µ

**ä¾èµ–å…³ç³»**:
```
orchestration â†’ services â†’ domain + infrastructure
```

---

### 2. events åŒ… ğŸŸ¡ (å»ºè®®)

**èŒè´£**: äº‹ä»¶å®šä¹‰å’Œäº‹ä»¶å¤„ç†

**ä½ç½®**: `crates/events/`

**ç†ç”±**:
- äº‹ä»¶é©±åŠ¨æ¶æ„éœ€è¦ç»Ÿä¸€çš„äº‹ä»¶å®šä¹‰
- å½“å‰eventsæ•£è½åœ¨å„å¤„
- æœ‰åˆ©äºå®ç°CQRSæ¨¡å¼

**ç»“æ„**:
```
events/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ definitions/     # äº‹ä»¶å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ order_events.rs
â”‚   â”‚   â”œâ”€â”€ position_events.rs
â”‚   â”‚   â”œâ”€â”€ market_events.rs
â”‚   â”‚   â””â”€â”€ mod.rs
â”‚   â”œâ”€â”€ handlers/        # äº‹ä»¶å¤„ç†å™¨
â”‚   â”œâ”€â”€ publisher.rs     # äº‹ä»¶å‘å¸ƒ
â”‚   â””â”€â”€ lib.rs
```

---

### 3. adapters åŒ… ğŸŸ¢ (å¯é€‰)

**èŒè´£**: å¤–éƒ¨ç³»ç»Ÿé€‚é…å™¨ (å…­è¾¹å½¢æ¶æ„çš„ç«¯å£)

**ä½ç½®**: `crates/adapters/`

**ç†ç”±**:
- ç»Ÿä¸€ç®¡ç†æ‰€æœ‰å¤–éƒ¨ç³»ç»Ÿäº¤äº’
- éš”ç¦»å¤–éƒ¨ä¾èµ–å˜åŒ–
- ç¬¦åˆå…­è¾¹å½¢æ¶æ„

**ç»“æ„**:
```
adapters/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ exchanges/       # äº¤æ˜“æ‰€é€‚é…å™¨
â”‚   â”œâ”€â”€ notifications/   # é€šçŸ¥é€‚é…å™¨ (é‚®ä»¶ã€é’‰é’‰ã€Telegram)
â”‚   â”œâ”€â”€ data_providers/  # æ•°æ®æä¾›è€…é€‚é…å™¨
â”‚   â””â”€â”€ lib.rs
```

---

## ğŸ”„ ä¾èµ–å…³ç³»ä¼˜åŒ–å»ºè®®

### å½“å‰ä¾èµ–å…³ç³» (è‰¯å¥½)

```
cli â†’ orchestration â†’ strategies/risk/execution â†’ domain
                                                   â†‘
                                          infrastructure
```

### æ¨èä¾èµ–å…³ç³» (æ›´å¥½) â­

```
cli â†’ orchestration â†’ services â†’ strategies/risk/execution â†’ domain
                                                              â†‘
                                                    infrastructure
```

**æ”¹è¿›ç‚¹**:
1. âœ… å¼•å…¥serviceså±‚è§£è€¦
2. âœ… orchestrationä¸ç›´æ¥è°ƒç”¨åº•å±‚
3. âœ… ä¸šåŠ¡é€»è¾‘é›†ä¸­åœ¨services

---

## ğŸ“‹ ä¾èµ–çŸ©é˜µä¼˜åŒ–

### å»ºè®®è¡¥å……

| åŒ… | å½“å‰å¯ä¾èµ– | å»ºè®®è¡¥å…… |
|---|-----------|---------|
| domain | serde, chrono | âœ… ä¿æŒä¸å˜ (å®Œç¾) |
| infrastructure | domain, core, common | + indicators (ç¼“å­˜éœ€è¦) âœ… |
| services (æ–°å¢) | domain, infrastructure, all business | - |
| strategies | domain, infra, indicators | + services (å¯é€‰) |
| risk | domain, infra, market | + services (å¯é€‰) |
| orchestration | æ‰€æœ‰ä¸šåŠ¡åŒ… | **æ”¹ä¸º** â†’ services |

---

## ğŸ¯ ç›®å½•ç»„ç»‡ä¼˜åŒ–å»ºè®®

### å»ºè®®è°ƒæ•´çš„åœ°æ–¹

#### 1. orchestration/workflow/strategy_config.rs

**é—®é¢˜**: åŒ…å«ä¸šåŠ¡é€»è¾‘

**å»ºè®®**:
```
å½“å‰: orchestration/workflow/strategy_config.rs (âŒ)
ç§»åˆ°: services/strategy/strategy_config_service.rs (âœ…)
```

#### 2. risk/backtest/ ç›®å½•

**é—®é¢˜**: å›æµ‹æ¨¡å‹åœ¨riskåŒ…ä¸­ä¸å¤ªåˆé€‚

**å»ºè®®**:
```
å½“å‰: risk/backtest/back_test_analysis.rs (ğŸŸ¡)
é€‰é¡¹1: domain/entities/backtest_result.rs (âœ… æ¨è)
é€‰é¡¹2: strategies/backtesting/models/ (âœ… ä¹Ÿå¯ä»¥)
```

#### 3. execution/execution_engine/backtest_executor.rs

**é—®é¢˜**: å›æµ‹æ‰§è¡Œå™¨åº”è¯¥åœ¨strategiesåŒ…

**å»ºè®®**:
```
å½“å‰: execution/execution_engine/backtest_executor.rs (ğŸŸ¡)
ç§»åˆ°: strategies/backtesting/executor.rs (âœ…)
```

---

## ğŸ” ç¼ºå¤±çš„é‡è¦ç›®å½•

### 1. æµ‹è¯•ç›®å½•è§„èŒƒ âš ï¸

**é—®é¢˜**: è§„èŒƒä¸­æœªå®šä¹‰æµ‹è¯•ç›®å½•ç»“æ„

**å»ºè®®æ·»åŠ **:

```
æ¯ä¸ªåŒ…çš„æµ‹è¯•ç»“æ„:

crates/xxx/
â”œâ”€â”€ src/           # æºä»£ç 
â”œâ”€â”€ tests/         # é›†æˆæµ‹è¯•
â”‚   â”œâ”€â”€ integration_test.rs
â”‚   â””â”€â”€ ...
â”œâ”€â”€ benches/       # æ€§èƒ½åŸºå‡†æµ‹è¯•
â”‚   â””â”€â”€ benchmark.rs
â””â”€â”€ examples/      # ä½¿ç”¨ç¤ºä¾‹
    â””â”€â”€ basic_usage.rs

srcå†…éƒ¨å•å…ƒæµ‹è¯•:
// src/xxx.rs
#[cfg(test)]
mod tests {
    use super::*;
    
    #[test]
    fn test_xxx() { }
}
```

---

### 2. é…ç½®æ–‡ä»¶ç»„ç»‡ âš ï¸

**é—®é¢˜**: é…ç½®æ–‡ä»¶ç»„ç»‡æœªè§„èŒƒ

**å»ºè®®**:

```
é¡¹ç›®æ ¹ç›®å½•é…ç½®ç»„ç»‡:

rust_quant/
â”œâ”€â”€ config/              # é…ç½®æ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ dev.toml        # å¼€å‘ç¯å¢ƒ
â”‚   â”œâ”€â”€ test.toml       # æµ‹è¯•ç¯å¢ƒ
â”‚   â”œâ”€â”€ prod.toml       # ç”Ÿäº§ç¯å¢ƒ
â”‚   â”œâ”€â”€ strategies/     # ç­–ç•¥é…ç½®
â”‚   â”‚   â”œâ”€â”€ vegas.toml
â”‚   â”‚   â”œâ”€â”€ nwe.toml
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ exchanges/      # äº¤æ˜“æ‰€é…ç½®
â”‚       â”œâ”€â”€ okx.toml
â”‚       â””â”€â”€ binance.toml
â”œâ”€â”€ .env.example        # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”œâ”€â”€ .env.dev            # å¼€å‘ç¯å¢ƒå˜é‡
â””â”€â”€ .env.prod           # ç”Ÿäº§ç¯å¢ƒå˜é‡
```

---

### 3. è„šæœ¬å’Œå·¥å…·ç›®å½• âš ï¸

**é—®é¢˜**: è§„èŒƒä¸­æœªæåŠ

**å»ºè®®**:

```
scripts/               # è¿ç»´è„šæœ¬
â”œâ”€â”€ db/               # æ•°æ®åº“ç›¸å…³
â”‚   â”œâ”€â”€ migrations/   # æ•°æ®åº“è¿ç§»
â”‚   â”œâ”€â”€ backup.sh     # å¤‡ä»½è„šæœ¬
â”‚   â””â”€â”€ restore.sh    # æ¢å¤è„šæœ¬
â”œâ”€â”€ deploy/           # éƒ¨ç½²ç›¸å…³
â”‚   â”œâ”€â”€ build.sh      # æ„å»ºè„šæœ¬
â”‚   â””â”€â”€ deploy.sh     # éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ dev/              # å¼€å‘å·¥å…·
â”‚   â”œâ”€â”€ fix_imports.sh
â”‚   â””â”€â”€ format_code.sh
â””â”€â”€ monitoring/       # ç›‘æ§è„šæœ¬
    â””â”€â”€ health_check.sh
```

---

## ğŸ“Š æ”¹è¿›ä¼˜å…ˆçº§è¯„ä¼°

### ğŸ”´ é«˜ä¼˜å…ˆçº§ (å¼ºçƒˆå»ºè®®)

1. **æ–°å¢servicesåŒ…** â­â­â­â­â­
   - åº”ç”¨æœåŠ¡å±‚æ˜¯DDDæ ‡å‡†ç»„æˆ
   - è§£å†³ä¸šåŠ¡é€»è¾‘æ•£è½é—®é¢˜
   - é¢„è®¡å·¥ä½œé‡: 4-6å°æ—¶

2. **è¡¥å……domainå®ä½“**
   - Positionå®ä½“ (æŒä»“æ˜¯æ ¸å¿ƒæ¦‚å¿µ)
   - å€¼å¯¹è±¡æ‰©å±• (Symbol, Leverageç­‰)
   - é¢„è®¡å·¥ä½œé‡: 2-3å°æ—¶

3. **è¡¥å……Repositoryå®ç°**
   - OrderRepository
   - PositionRepository
   - AccountRepository
   - é¢„è®¡å·¥ä½œé‡: 3-4å°æ—¶

### ğŸŸ¡ ä¸­ä¼˜å…ˆçº§ (å»ºè®®)

4. **å®Œå–„backtestingç›®å½•**
   - å›æµ‹å¼•æ“å®ç°
   - æ€§èƒ½æŒ‡æ ‡
   - å‚æ•°ä¼˜åŒ–
   - é¢„è®¡å·¥ä½œé‡: 6-8å°æ—¶

5. **è¡¥å……risk/policies**
   - å…·ä½“é£æ§ç­–ç•¥å®ç°
   - é¢„è®¡å·¥ä½œé‡: 4-6å°æ—¶

6. **æ‰©å±•indicators**
   - è¡¥å……å¸¸ç”¨æŒ‡æ ‡
   - é¢„è®¡å·¥ä½œé‡: 8-10å°æ—¶

### ğŸŸ¢ ä½ä¼˜å…ˆçº§ (å¯é€‰)

7. **æ–°å¢eventsåŒ…**
   - äº‹ä»¶é©±åŠ¨æ¶æ„
   - é¢„è®¡å·¥ä½œé‡: 4-6å°æ—¶

8. **æ–°å¢adaptersåŒ…**
   - å¤–éƒ¨ç³»ç»Ÿé€‚é…
   - é¢„è®¡å·¥ä½œé‡: 6-8å°æ—¶

---

## ğŸ¯ æœ€ç»ˆå»ºè®®

### æ ¸å¿ƒå»ºè®® â­â­â­â­â­

**å½“å‰è§„èŒƒè¯„åˆ†**: 4.5/5 â­â­â­â­â­

**å·²ç»å¾ˆå¥½ï¼Œä½†å¯ä»¥æ›´å®Œç¾ï¼**

### ç«‹å³è¡ŒåŠ¨å»ºè®®

**ç¬¬ä¸€ä¼˜å…ˆçº§** (å»ºè®®ç«‹å³æ‰§è¡Œ):

1. **åˆ›å»ºservicesåŒ…** â­â­â­â­â­
   - ä»orchestration/workflow/strategy_config.rsæå–ä¸šåŠ¡é€»è¾‘
   - åˆ›å»ºç»Ÿä¸€çš„åº”ç”¨æœåŠ¡å±‚
   - å·¥ä½œé‡: 4-6å°æ—¶

2. **è¡¥å……domainå®ä½“**
   - æ·»åŠ Positionå®ä½“
   - æ‰©å±•å€¼å¯¹è±¡ (Symbol, Leverage)
   - å·¥ä½œé‡: 2-3å°æ—¶

3. **æ›´æ–°è§„èŒƒæ–‡æ¡£**
   - æ·»åŠ servicesåŒ…è§„èŒƒ
   - æ·»åŠ æµ‹è¯•ç›®å½•è§„èŒƒ
   - æ·»åŠ é…ç½®æ–‡ä»¶ç»„ç»‡è§„èŒƒ
   - å·¥ä½œé‡: 1å°æ—¶

**ç¬¬äºŒä¼˜å…ˆçº§** (å¯åç»­æ‰§è¡Œ):

4. è¡¥å……Repositoryå®ç°
5. å®Œå–„backtesting
6. æ‰©å±•risk/policies

---

## ğŸ“‹ è§„èŒƒæ–‡æ¡£æ”¹è¿›å»ºè®®

### å»ºè®®æ·»åŠ çš„ç« èŠ‚

1. **æµ‹è¯•ç»„ç»‡è§„èŒƒ** âš ï¸ ç¼ºå¤±
   - å•å…ƒæµ‹è¯•
   - é›†æˆæµ‹è¯•
   - æ€§èƒ½æµ‹è¯•
   - Mockè§„èŒƒ

2. **é…ç½®ç®¡ç†è§„èŒƒ** âš ï¸ ç¼ºå¤±
   - é…ç½®æ–‡ä»¶ç»„ç»‡
   - ç¯å¢ƒå˜é‡ç®¡ç†
   - æ•æ„Ÿä¿¡æ¯å¤„ç†

3. **æ€§èƒ½ä¼˜åŒ–æŒ‡å—** ğŸŸ¡ å¯é€‰
   - ç¼“å­˜ç­–ç•¥
   - æ‰¹é‡æ“ä½œ
   - å¼‚æ­¥ä¼˜åŒ–

4. **å®‰å…¨è§„èŒƒ** ğŸŸ¡ å¯é€‰
   - APIå¯†é’¥ç®¡ç†
   - æ•°æ®åŠ å¯†
   - è®¿é—®æ§åˆ¶

5. **éƒ¨ç½²è§„èŒƒ** ğŸŸ¡ å¯é€‰
   - Dockeré…ç½®
   - ç¯å¢ƒé…ç½®
   - ç›‘æ§å‘Šè­¦

---

## ğŸŠ æ€»ç»“

### å½“å‰è§„èŒƒçš„ä¼˜ç‚¹ âœ…

1. âœ… **DDDæ¶æ„æ¸…æ™°** - domainå’Œinfrastructureåˆ†ç¦»å®Œç¾
2. âœ… **åˆ†å±‚åˆç†** - 8å±‚æ¶æ„èŒè´£æ˜ç¡®
3. âœ… **ä¾èµ–è§„åˆ™ä¸¥æ ¼** - é˜²æ­¢å¾ªç¯ä¾èµ–
4. âœ… **å¼€å‘æŒ‡å¯¼å®Œæ•´** - å†³ç­–æ ‘ã€æµç¨‹ã€æœ€ä½³å®è·µ

### ä¸»è¦æ”¹è¿›å»ºè®® ğŸŸ¡

1. ğŸ”´ **æ–°å¢servicesåŒ…** (å¼ºçƒˆå»ºè®®)
   - åº”ç”¨æœåŠ¡å±‚ç¼ºå¤±
   - ä¸šåŠ¡é€»è¾‘åè°ƒéœ€è¦ç»Ÿä¸€çš„åœ°æ–¹

2. ğŸŸ¡ **è¡¥å……domainå®ä½“**
   - Positionå®ä½“
   - æ›´å¤šå€¼å¯¹è±¡

3. ğŸŸ¡ **å®Œå–„infrastructure**
   - è¡¥å……Repositoryå®ç°
   - å¤–éƒ¨æœåŠ¡é€‚é…å™¨

4. ğŸŸ¡ **æ‰©å±•è§„èŒƒæ–‡æ¡£**
   - æµ‹è¯•è§„èŒƒ
   - é…ç½®ç®¡ç†
   - æ€§èƒ½å’Œå®‰å…¨

### ç»¼åˆè¯„ä»·

**å½“å‰çŠ¶æ€**: â­â­â­â­â­ (4.5/5) **ä¼˜ç§€**

**æ”¹è¿›åé¢„æœŸ**: â­â­â­â­â­ (5/5) **å®Œç¾**

**å»ºè®®**: 
- âœ… å½“å‰è§„èŒƒå·²ç»éå¸¸å¥½ï¼Œå¯ä»¥ç«‹å³ä½¿ç”¨
- ğŸŸ¢ å»ºè®®ä¼˜å…ˆæ·»åŠ servicesåŒ…
- ğŸŸ¡ å…¶ä»–æ”¹è¿›å¯æ¸è¿›å¼è¿›è¡Œ

---

*ç›®å½•ç»“æ„åˆ†ææŠ¥å‘Š - 2025-11-07*  
*å½“å‰è§„èŒƒä¼˜ç§€ï¼Œæœ‰è¿›ä¸€æ­¥å®Œå–„ç©ºé—´ï¼*

